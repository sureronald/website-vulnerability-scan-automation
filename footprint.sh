#!/bin/sh
#Author: Ronald Osure (c) 2014
#Purpose: Scan a website and establish the CMS of software running 
#----- DEPENDENCY ------
#----- 1. Whatweb (Quick website footprinting)

WHATWEB_CMD="ruby /usr/bin/whatweb "

help(){
 echo "Usage: sh ./footprint.sh filename.txt"
 echo "       Where filename is a line separated file containing domain names (FQDN)"
}

# Check root privileges
if [ $(id -u) -ne 0 ]; then
  echo '[!] Please run this script as root' >&2
  exit 1
fi

#Check for arguments count
if [ "$#" -eq  "1" ]; then
 if [ -e $1 ]; then
  echo #We just continue
 else
  help
  exit 1
 fi
else
 help
 exit 1
fi;

#We loop through each domain in the file
for domain in $(cat $1); do 
 #Check for empty lines. If line empty.. then continue
 #if [ "${#domain}" -eq "0" ]; then
 # continue
 #fi
 echo "[+] Doing footprinting on $domain"
 #Just print to stdout. User can redirect to file 
 $WHATWEB_CMD --no-errors $domain 2>/dev/null
 echo
done

exit 0
 
